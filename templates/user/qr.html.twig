{% extends 'base.html.twig' %}

{% block title %}User{% endblock %}

{% block body %}
<div class="fils" style="padding-left: 300px;">
    <h1>User</h1>

    <table class="table" >
        <tbody>
            <tr>
                <th>Iduser</th>
                <td>{{ user.iduser }}</td>
            </tr>
            <tr>
                <th>Username</th>
                <td>{{ user.username }}</td>
            </tr>
            <tr>
                <th>Email</th>
                <td>{{ user.email }}</td>
            </tr>
            <tr>
                <th>Password</th>
                <td>{{ user.password }}</td>
            </tr>
            <tr>
                <th>Firstname</th>
                <td>{{ user.firstname }}</td>
            </tr>
            <tr>
                <th>Lastname</th>
                <td>{{ user.lastname }}</td>
            </tr>
            <tr>
                <th>Tel</th>
                <td>{{ user.tel }}</td>
            </tr>
            <tr>
                <th>Address</th>
                <td>{{ user.address }}</td>
            </tr>
            
        </tbody>
    </table>
<div class ="qrcode">
   <img id="qrCodeImage" src="data:image/png;base64,{{ qrCodeImage }}" alt="QR Code" >
</div>   
    <a href="{{ path('app_user_index') }}">back to list</a>

    <a href="{{ path('app_user_edit', {'iduser': user.iduser}) }}">edit</a>

    {{ include('user/_delete_form.html.twig') }}
    </div>
     <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function () {
      function downloadTicket() {
        const ticketElement = document.querySelector('.fils');
        html2canvas(ticketElement).then(function (canvas) {
          const imageData = canvas.toDataURL('image/png');
          const downloadLink = document.createElement('a');
          downloadLink.href = imageData;
          downloadLink.download = 'ticket.png';
          downloadLink.click();
        });
      }

      const downloadTicketBtn = document.getElementById('downloadTicketBtn');
      downloadTicketBtn.addEventListener('click', downloadTicket);
    });
  </script>
{% endblock %}
